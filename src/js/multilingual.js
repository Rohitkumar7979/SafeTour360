// Comprehensive Multilingual Support System
class MultilingualSystem {
    constructor() {
        this.currentLanguage = localStorage.getItem('safetour_language') || 'en';
        this.translations = {};
        this.supportedLanguages = {
            'en': { name: 'English', flag: 'ЁЯЗмЁЯЗз', direction: 'ltr' },
            'hi': { name: 'рд╣рд┐рдВрджреА', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' },
            'bn': { name: 'ржмрж╛ржВрж▓рж╛', flag: 'ЁЯЗзЁЯЗй', direction: 'ltr' },
            'as': { name: 'ржЕрж╕ржорзАржпрж╝рж╛', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' },
            'ne': { name: 'рдиреЗрдкрд╛рд▓реА', flag: 'ЁЯЗ│ЁЯЗ╡', direction: 'ltr' },
            'ta': { name: 'родрооро┐ро┤рпН', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' },
            'te': { name: 'р░др▒Жр░▓р▒Бр░Чр▒Б', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' },
            'ml': { name: 'р┤ор┤▓р┤пр┤╛р┤│р┤В', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' },
            'kn': { name: 'р▓Хр▓ир│Нр▓ир▓б', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' },
            'gu': { name: 'ркЧрлБркЬрк░рк╛ркдрлА', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' },
            'mr': { name: 'рдорд░рд╛рдареА', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' },
            'pa': { name: 'рикрй░риЬри╛римрйА', flag: 'ЁЯЗоЁЯЗ│', direction: 'ltr' }
        };
        this.loadTranslations();
        this.init();
    }

    loadTranslations() {
        // Core translations for SafeTour360┬░
        this.translations = {
            en: {
                // Navigation
                'nav.home': 'Home',
                'nav.tourists': 'Tourists',
                'nav.dashboard': 'Dashboard',
                'nav.contact': 'Contact',
                
                // Homepage
                'hero.title': 'Smart Tourist Safety',
                'hero.subtitle': 'Monitoring System',
                'hero.description': 'AI-powered safety monitoring with blockchain-based digital IDs, real-time tracking, and instant emergency response for tourists across India',
                'hero.cta.primary': 'Get Your Tourist ID',
                'hero.cta.secondary': 'Watch Demo',
                
                // Features
                'features.digital_id': 'Digital Tourist ID',
                'features.digital_id.desc': 'Blockchain-based secure digital identity with KYC verification',
                'features.panic_button': 'Panic Button',
                'features.panic_button.desc': 'Instant SOS with live location sharing to authorities',
                'features.geofencing': 'Geo-Fencing',
                'features.geofencing.desc': 'Smart alerts when entering high-risk zones',
                'features.multilingual': 'Multilingual',
                'features.multilingual.desc': 'Support for 10+ Indian languages and English',
                
                // Emergency
                'emergency.title': 'EMERGENCY ALERT SENT!',
                'emergency.location.shared': 'Your location has been shared with:',
                'emergency.police': 'Local Police Station',
                'emergency.medical': 'Medical Services',
                'emergency.contacts': 'Emergency Contacts',
                'emergency.close': 'Close',
                'emergency.call': 'Call Now',
                
                // Geofencing
                'geo.entered': 'Entered',
                'geo.exited': 'Exited',
                'geo.restricted': 'RESTRICTED AREA!',
                'geo.restricted.message': 'Please exit immediately. Authorities have been notified.',
                'geo.understand': 'I UNDERSTAND',
                
                // Common
                'common.loading': 'Loading...',
                'common.save': 'Save',
                'common.cancel': 'Cancel',
                'common.continue': 'Continue',
                'common.back': 'Back',
                'common.next': 'Next',
                'common.language': 'Language',
                'common.location': 'Location',
                'common.time': 'Time',
                'common.status': 'Status',
                'common.active': 'Active',
                'common.inactive': 'Inactive'
            },
            
            hi: {
                // Navigation
                'nav.home': 'рд╣реЛрдо',
                'nav.tourists': 'рдкрд░реНрдпрдЯрдХ',
                'nav.dashboard': 'рдбреИрд╢рдмреЛрд░реНрдб',
                'nav.contact': 'рд╕рдВрдкрд░реНрдХ',
                
                // Homepage
                'hero.title': 'рд╕реНрдорд╛рд░реНрдЯ рдкрд░реНрдпрдЯрдХ рд╕реБрд░рдХреНрд╖рд╛',
                'hero.subtitle': 'рдирд┐рдЧрд░рд╛рдиреА рдкреНрд░рдгрд╛рд▓реА',
                'hero.description': 'рдмреНрд▓реЙрдХрдЪреЗрди-рдЖрдзрд╛рд░рд┐рдд рдбрд┐рдЬрд┐рдЯрд▓ рдЖрдИрдбреА, рд░реАрдпрд▓-рдЯрд╛рдЗрдо рдЯреНрд░реИрдХрд┐рдВрдЧ рдФрд░ рднрд╛рд░рдд рднрд░ рдХреЗ рдкрд░реНрдпрдЯрдХреЛрдВ рдХреЗ рд▓рд┐рдП рддрддреНрдХрд╛рд▓ рдЖрдкрд╛рддрдХрд╛рд▓реАрди рдкреНрд░рддрд┐рдХреНрд░рд┐рдпрд╛ рдХреЗ рд╕рд╛рде AI-рд╕рдВрдЪрд╛рд▓рд┐рдд рд╕реБрд░рдХреНрд╖рд╛ рдирд┐рдЧрд░рд╛рдиреА',
                'hero.cta.primary': 'рдЕрдкрдирд╛ рдкрд░реНрдпрдЯрдХ рдЖрдИрдбреА рдкреНрд░рд╛рдкреНрдд рдХрд░реЗрдВ',
                'hero.cta.secondary': 'рдбреЗрдореЛ рджреЗрдЦреЗрдВ',
                
                // Features
                'features.digital_id': 'рдбрд┐рдЬрд┐рдЯрд▓ рдкрд░реНрдпрдЯрдХ рдЖрдИрдбреА',
                'features.digital_id.desc': 'KYC рд╕рддреНрдпрд╛рдкрди рдХреЗ рд╕рд╛рде рдмреНрд▓реЙрдХрдЪреЗрди-рдЖрдзрд╛рд░рд┐рдд рд╕реБрд░рдХреНрд╖рд┐рдд рдбрд┐рдЬрд┐рдЯрд▓ рдкрд╣рдЪрд╛рди',
                'features.panic_button': 'рдкреИрдирд┐рдХ рдмрдЯрди',
                'features.panic_button.desc': 'рдЕрдзрд┐рдХрд╛рд░рд┐рдпреЛрдВ рдХреЛ рд▓рд╛рдЗрд╡ рд▓реЛрдХреЗрд╢рди рд╢реЗрдпрд░рд┐рдВрдЧ рдХреЗ рд╕рд╛рде рддрддреНрдХрд╛рд▓ SOS',
                'features.geofencing': 'рдЬрд┐рдпреЛ-рдлреЗрдВрд╕рд┐рдВрдЧ',
                'features.geofencing.desc': 'рдЙрдЪреНрдЪ рдЬреЛрдЦрд┐рдо рд╡рд╛рд▓реЗ рдХреНрд╖реЗрддреНрд░реЛрдВ рдореЗрдВ рдкреНрд░рд╡реЗрд╢ рдХрд░рддреЗ рд╕рдордп рд╕реНрдорд╛рд░реНрдЯ рдЕрд▓рд░реНрдЯ',
                'features.multilingual': 'рдмрд╣реБрднрд╛рд╖реА',
                'features.multilingual.desc': '10+ рднрд╛рд░рддреАрдп рднрд╛рд╖рд╛рдУрдВ рдФрд░ рдЕрдВрдЧреНрд░реЗрдЬреА рдХрд╛ рд╕рдорд░реНрдерди',
                
                // Emergency
                'emergency.title': 'рдЖрдкрд╛рддрдХрд╛рд▓реАрди рдЪреЗрддрд╛рд╡рдиреА рднреЗрдЬреА рдЧрдИ!',
                'emergency.location.shared': 'рдЖрдкрдХрд╛ рд╕реНрдерд╛рди рд╕рд╛рдЭрд╛ рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИ:',
                'emergency.police': 'рд╕реНрдерд╛рдиреАрдп рдкреБрд▓рд┐рд╕ рд╕реНрдЯреЗрд╢рди',
                'emergency.medical': 'рдЪрд┐рдХрд┐рддреНрд╕рд╛ рд╕реЗрд╡рд╛рдПрдВ',
                'emergency.contacts': 'рдЖрдкрд╛рддрдХрд╛рд▓реАрди рд╕рдВрдкрд░реНрдХ',
                'emergency.close': 'рдмрдВрдж рдХрд░реЗрдВ',
                'emergency.call': 'рдЕрднреА рдХреЙрд▓ рдХрд░реЗрдВ',
                
                // Geofencing
                'geo.entered': 'рдкреНрд░рд╡реЗрд╢ рдХрд┐рдпрд╛',
                'geo.exited': 'рдмрд╛рд╣рд░ рдирд┐рдХрд▓рд╛',
                'geo.restricted': 'рдкреНрд░рддрд┐рдмрдВрдзрд┐рдд рдХреНрд╖реЗрддреНрд░!',
                'geo.restricted.message': 'рдХреГрдкрдпрд╛ рддреБрд░рдВрдд рдмрд╛рд╣рд░ рдирд┐рдХрд▓реЗрдВред рдЕрдзрд┐рдХрд╛рд░рд┐рдпреЛрдВ рдХреЛ рд╕реВрдЪрд┐рдд рдХрд░ рджрд┐рдпрд╛ рдЧрдпрд╛ рд╣реИред',
                'geo.understand': 'рдореИрдВ рд╕рдордЭ рдЧрдпрд╛',
                
                // Common
                'common.loading': 'рд▓реЛрдб рд╣реЛ рд░рд╣рд╛ рд╣реИ...',
                'common.save': 'рд╕реЗрд╡ рдХрд░реЗрдВ',
                'common.cancel': 'рд░рджреНрдж рдХрд░реЗрдВ',
                'common.continue': 'рдЬрд╛рд░реА рд░рдЦреЗрдВ',
                'common.back': 'рд╡рд╛рдкрд╕',
                'common.next': 'рдЕрдЧрд▓рд╛',
                'common.language': 'рднрд╛рд╖рд╛',
                'common.location': 'рд╕реНрдерд╛рди',
                'common.time': 'рд╕рдордп',
                'common.status': 'рд╕реНрдерд┐рддрд┐',
                'common.active': 'рд╕рдХреНрд░рд┐рдп',
                'common.inactive': 'рдирд┐рд╖реНрдХреНрд░рд┐рдп'
            },
            
            bn: {
                // Navigation
                'nav.home': 'рж╣рзЛржо',
                'nav.tourists': 'ржкрж░рзНржпржЯржХ',
                'nav.dashboard': 'ржбрзНржпрж╛рж╢ржмрзЛрж░рзНржб',
                'nav.contact': 'ржпрзЛржЧрж╛ржпрзЛржЧ',
                
                // Homepage
                'hero.title': 'рж╕рзНржорж╛рж░рзНржЯ ржкрж░рзНржпржЯржХ ржирж┐рж░рж╛ржкрждрзНрждрж╛',
                'hero.subtitle': 'ржкрж░рзНржпржмрзЗржХрзНрж╖ржг ржмрзНржпржмрж╕рзНржерж╛',
                'hero.description': 'ржмрзНрж▓ржХржЪрзЗржЗржи-ржнрж┐рждрзНрждрж┐ржХ ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржЖржЗржбрж┐, рж░рж┐ржпрж╝рзЗрж▓-ржЯрж╛ржЗржо ржЯрзНрж░рзНржпрж╛ржХрж┐ржВ ржПржмржВ ржнрж╛рж░ржд ржЬрзБржбрж╝рзЗ ржкрж░рзНржпржЯржХржжрзЗрж░ ржЬржирзНржп рждрж╛рзОржХрзНрж╖ржгрж┐ржХ ржЬрж░рзБрж░рж┐ ржкрзНрж░рждрж┐ржХрзНрж░рж┐ржпрж╝рж╛ рж╕рж╣ AI-ржЪрж╛рж▓рж┐ржд ржирж┐рж░рж╛ржкрждрзНрждрж╛ ржкрж░рзНржпржмрзЗржХрзНрж╖ржг',
                'hero.cta.primary': 'ржЖржкржирж╛рж░ ржкрж░рзНржпржЯржХ ржЖржЗржбрж┐ ржкрж╛ржи',
                'hero.cta.secondary': 'ржбрзЗржорзЛ ржжрзЗржЦрзБржи',
                
                // Features
                'features.digital_id': 'ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрж░рзНржпржЯржХ ржЖржЗржбрж┐',
                'features.digital_id.desc': 'KYC ржпрж╛ржЪрж╛ржЗржХрж░ржг рж╕рж╣ ржмрзНрж▓ржХржЪрзЗржЗржи-ржнрж┐рждрзНрждрж┐ржХ ржирж┐рж░рж╛ржкржж ржбрж┐ржЬрж┐ржЯрж╛рж▓ ржкрж░рж┐ржЪржпрж╝',
                'features.panic_button': 'ржкрзНржпрж╛ржирж┐ржХ ржмрзЛрждрж╛ржо',
                'features.panic_button.desc': 'ржХрж░рзНрждрзГржкржХрзНрж╖рзЗрж░ ржХрж╛ржЫрзЗ рж▓рж╛ржЗржн ржЕржмрж╕рзНржерж╛ржи рж╢рзЗржпрж╝рж╛рж░рж┐ржВ рж╕рж╣ рждрж╛рзОржХрзНрж╖ржгрж┐ржХ SOS',
                'features.geofencing': 'ржЬрж┐ржУ-ржлрзЗржирзНрж╕рж┐ржВ',
                'features.geofencing.desc': 'ржЙржЪрзНржЪ ржЭрзБржБржХрж┐ржкрзВрж░рзНржг ржПрж▓рж╛ржХрж╛ржпрж╝ ржкрзНрж░ржмрзЗрж╢рзЗрж░ рж╕ржоржпрж╝ рж╕рзНржорж╛рж░рзНржЯ рж╕рждрж░рзНржХрждрж╛',
                'features.multilingual': 'ржмрж╣рзБржнрж╛рж╖рж┐ржХ',
                'features.multilingual.desc': 'рззрзж+ ржнрж╛рж░рждрзАржпрж╝ ржнрж╛рж╖рж╛ ржПржмржВ ржЗржВрж░рзЗржЬрж┐рж░ рж╕ржорж░рзНржержи',
                
                // Emergency
                'emergency.title': 'ржЬрж░рзБрж░рж┐ рж╕рждрж░рзНржХрждрж╛ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ!',
                'emergency.location.shared': 'ржЖржкржирж╛рж░ ржЕржмрж╕рзНржерж╛ржи рж╢рзЗржпрж╝рж╛рж░ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗ:',
                'emergency.police': 'рж╕рзНржерж╛ржирзАржпрж╝ ржкрзБрж▓рж┐рж╢ рж╕рзНржЯрзЗрж╢ржи',
                'emergency.medical': 'ржЪрж┐ржХрж┐рзОрж╕рж╛ рж╕рзЗржмрж╛',
                'emergency.contacts': 'ржЬрж░рзБрж░рж┐ ржпрзЛржЧрж╛ржпрзЛржЧ',
                'emergency.close': 'ржмржирзНржз ржХрж░рзБржи',
                'emergency.call': 'ржПржЦржиржЗ ржХрж▓ ржХрж░рзБржи'
            }
            // Add more languages as needed...
        };
    }

    init() {
        this.updatePageLanguage();
        this.addLanguageSelector();
        this.addVoiceSupport();
    }

    translate(key, fallback = key) {
        const translation = this.translations[this.currentLanguage];
        return translation && translation[key] ? translation[key] : (this.translations.en[key] || fallback);
    }

    changeLanguage(langCode) {
        if (this.supportedLanguages[langCode]) {
            this.currentLanguage = langCode;
            localStorage.setItem('safetour_language', langCode);
            this.updatePageLanguage();
            this.updateDirection();
            
            // Announce language change
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(
                    this.translate('common.language') + ' ' + this.supportedLanguages[langCode].name
                );
                utterance.lang = langCode;
                speechSynthesis.speak(utterance);
            }
        }
    }

    updatePageLanguage() {
        // Update all elements with data-translate attribute
        document.querySelectorAll('[data-translate]').forEach(element => {
            const key = element.getAttribute('data-translate');
            const translation = this.translate(key);
            
            if (element.tagName === 'INPUT' && element.type === 'submit') {
                element.value = translation;
            } else if (element.hasAttribute('placeholder')) {
                element.placeholder = translation;
            } else {
                element.textContent = translation;
            }
        });

        // Update HTML lang attribute
        document.documentElement.lang = this.currentLanguage;
    }

    updateDirection() {
        const direction = this.supportedLanguages[this.currentLanguage].direction;
        document.documentElement.dir = direction;
        document.body.style.direction = direction;
    }

    addLanguageSelector() {
        // Create floating language selector
        const selector = document.createElement('div');
        selector.id = 'languageSelector';
        selector.className = 'fixed bottom-4 left-4 z-40';
        
        selector.innerHTML = `
            <div class="relative">
                <button id="langToggle" class="bg-slate-700 hover:bg-slate-600 text-slate-200 p-3 rounded-full shadow-lg border border-slate-600 transition duration-300">
                    <span class="text-lg">${this.supportedLanguages[this.currentLanguage].flag}</span>
                    <i class="fas fa-chevron-up ml-1 text-xs"></i>
                </button>
                <div id="langDropdown" class="hidden absolute bottom-full left-0 mb-2 bg-slate-700 rounded-lg shadow-2xl border border-slate-600 min-w-48 max-h-80 overflow-y-auto">
                    <div class="p-2">
                        <div class="text-xs text-slate-400 mb-2 px-2">Select Language:</div>
                        ${Object.entries(this.supportedLanguages).map(([code, lang]) => `
                            <button onclick="multilingual.changeLanguage('${code}')" 
                                    class="w-full text-left px-3 py-2 hover:bg-slate-600 rounded flex items-center justify-between transition duration-200 ${code === this.currentLanguage ? 'bg-blue-600 text-white' : 'text-slate-200'}">
                                <span class="flex items-center">
                                    <span class="text-lg mr-3">${lang.flag}</span>
                                    <span class="text-sm">${lang.name}</span>
                                </span>
                                ${code === this.currentLanguage ? '<i class="fas fa-check text-xs"></i>' : ''}
                            </button>
                        `).join('')}
                    </div>
                </div>
            </div>
        `;
        
        if (document.body) {
            document.body.appendChild(selector);
        }
        
        // Toggle dropdown
        document.getElementById('langToggle').addEventListener('click', (e) => {
            e.stopPropagation();
            const dropdown = document.getElementById('langDropdown');
            dropdown.classList.toggle('hidden');
        });
        
        // Close dropdown when clicking outside
        document.addEventListener('click', () => {
            document.getElementById('langDropdown').classList.add('hidden');
        });
    }

    addVoiceSupport() {
        // Add voice input for emergency scenarios
        if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            this.recognition = new SpeechRecognition();
            
            this.recognition.continuous = false;
            this.recognition.interimResults = false;
            this.recognition.lang = this.currentLanguage + '-IN'; // Default to Indian variants
            
            this.recognition.onresult = (event) => {
                const transcript = event.results[0][0].transcript.toLowerCase();
                this.handleVoiceCommand(transcript);
            };
            
            // Add voice button to panic area
            this.addVoiceButton();
        }
    }

    addVoiceButton() {
        const voiceBtn = document.createElement('button');
        voiceBtn.id = 'voiceEmergency';
        voiceBtn.className = 'fixed bottom-4 right-4 bg-red-600 hover:bg-red-700 text-white p-4 rounded-full shadow-lg z-40 transition duration-300';
        voiceBtn.innerHTML = '<i class="fas fa-microphone text-xl"></i>';
        voiceBtn.title = this.translate('emergency.voice', 'Voice Emergency');
        
        voiceBtn.addEventListener('click', () => {
            this.startVoiceRecognition();
        });
        
        if (document.body) {
            document.body.appendChild(voiceBtn);
        }
    }

    startVoiceRecognition() {
        if (this.recognition) {
            this.recognition.lang = this.currentLanguage + '-IN';
            this.recognition.start();
            
            // Visual feedback
            const voiceBtn = document.getElementById('voiceEmergency');
            voiceBtn.innerHTML = '<i class="fas fa-microphone-slash text-xl animate-pulse"></i>';
            voiceBtn.classList.add('animate-pulse');
            
            setTimeout(() => {
                voiceBtn.innerHTML = '<i class="fas fa-microphone text-xl"></i>';
                voiceBtn.classList.remove('animate-pulse');
            }, 5000);
        }
    }

    handleVoiceCommand(transcript) {
        const emergencyKeywords = {
            en: ['help', 'emergency', 'panic', 'police', 'medical', 'danger'],
            hi: ['рдорджрдж', 'рдЖрдкрд╛рддрдХрд╛рд▓', 'рдкреБрд▓рд┐рд╕', 'рдбреЙрдХреНрдЯрд░', 'рдЦрддрд░рд╛'],
            bn: ['рж╕рж╛рж╣рж╛ржпрзНржп', 'ржЬрж░рзБрж░рж┐', 'ржкрзБрж▓рж┐рж╢', 'ржбрж╛ржХрзНрждрж╛рж░', 'ржмрж┐ржкржж']
        };
        
        const keywords = emergencyKeywords[this.currentLanguage] || emergencyKeywords.en;
        const isEmergency = keywords.some(keyword => transcript.includes(keyword));
        
        if (isEmergency) {
            // Trigger panic button
            if (window.panicSystem) {
                panicSystem.triggerAlert('emergency');
            }
            
            // Speak confirmation
            this.speak(this.translate('emergency.title'));
        }
    }

    speak(text, lang = this.currentLanguage) {
        if ('speechSynthesis' in window) {
            const utterance = new SpeechSynthesisUtterance(text);
            utterance.lang = lang + '-IN';
            utterance.rate = 0.9;
            utterance.pitch = 1;
            speechSynthesis.speak(utterance);
        }
    }

    // RTL support for future Arabic/Urdu languages
    isRTL() {
        return this.supportedLanguages[this.currentLanguage].direction === 'rtl';
    }

    // Get formatted date/time in local language
    formatDateTime(date = new Date()) {
        try {
            return new Intl.DateTimeFormat(this.currentLanguage + '-IN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                hour: '2-digit',
                minute: '2-digit'
            }).format(date);
        } catch (e) {
            return date.toLocaleString();
        }
    }

    // Number formatting for different locales
    formatNumber(number) {
        try {
            return new Intl.NumberFormat(this.currentLanguage + '-IN').format(number);
        } catch (e) {
            return number.toString();
        }
    }
}

// Initialize multilingual system
const multilingual = new MultilingualSystem();

// Add translation attributes to existing elements
document.addEventListener('DOMContentLoaded', function() {
    // Add data-translate attributes to key elements
    const translations = {
        'SafeTour360┬░': 'SafeTour360┬░',
        'Home': 'nav.home',
        'Tourists': 'nav.tourists', 
        'Dashboard': 'nav.dashboard',
        'Contact': 'nav.contact',
        'Smart Tourist Safety': 'hero.title',
        'Monitoring System': 'hero.subtitle',
        'Get Your Tourist ID': 'hero.cta.primary',
        'Watch Demo': 'hero.cta.secondary',
        'Digital Tourist ID': 'features.digital_id',
        'Panic Button': 'features.panic_button',
        'Geo-Fencing': 'features.geofencing',
        'Multilingual': 'features.multilingual'
    };
    
    // Apply translations to elements
    Object.entries(translations).forEach(([text, key]) => {
        const elements = Array.from(document.querySelectorAll('*')).filter(el => 
            el.textContent.trim() === text && !el.querySelector('*')
        );
        elements.forEach(el => {
            el.setAttribute('data-translate', key);
        });
    });
    
    // Update page language
    multilingual.updatePageLanguage();
});
